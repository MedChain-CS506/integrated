{"ast":null,"code":"import _defineProperty from \"/home/n3m0/Documents/integrated/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/n3m0/Documents/integrated/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/n3m0/Documents/integrated/client/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport readingTime from 'reading-time'; //* MUI\n\nimport Snackbar from '@material-ui/core/Snackbar';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './utils/theme';\nimport { auth, firestore } from './firebase'; //* Components\n\nimport Navbar from './components/Navbar';\nimport Loading from './components/Loading';\nimport DialogHost from './components/Dialog/DialogHost'; //* Pages\n\nimport Routes from './pages/Routes'; //* Context\n\nimport PatientContextProvider from './context/patient/PatientContext';\nimport AlertContextProvider from './context/alert/AlertContext'; // Blockchain\n\nimport getWeb3 from \"./utils/getWeb3.js\";\nimport MedChainContract from \"./contracts/med_chain.json\";\n\nasync function getBlock() {\n  try {\n    var data = {\n      storageValue: 0,\n      web3: null,\n      accounts: null,\n      contract: null\n    };\n    console.log(\"its going\");\n    const web3 = await getWeb3();\n    const accounts = await web3.eth.getAccounts();\n    const networkId = await web3.eth.net.getId();\n    const deployedNetwork = MedChainContract.networks[networkId];\n    const instance = new web3.eth.Contract(MedChainContract.abi, deployedNetwork && deployedNetwork.address);\n    const cont = instance;\n    data.accounts = accounts;\n    data.web3 = web3;\n    data.contract = instance;\n    return data;\n  } catch (error) {\n    alert(\"Failed to load web3, accounts, or contract. Check console for details.\");\n    console.error(error);\n  }\n}\n\n;\n\nasync function example(data) {\n  console.log(data.accounts);\n  console.log(data.accounts[0]);\n  data.contract.address = data.accounts[0];\n  await data.contract.methods.add_paitent(19, 20, \"Krishna\", \"7/11/1998\", 40, \"Male\", \"None\").send({\n    from: data.accounts[0]\n  });\n  const response = await data.contract.methods.lookup_paitent(19).call();\n  console.log(response);\n}\n\nfunction App() {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        userData = _useState4[0],\n        setUserData = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        signedIn = _useState6[0],\n        setSignedIn = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        ready = _useState8[0],\n        setReady = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        performingAction = _useState10[0],\n        setPerformingAction = _useState10[1];\n\n  const _useState11 = useState({\n    signUpDialog: false,\n    signInDialog: false,\n    settingsDialog: false,\n    signOutDialog: false,\n    deleteAccountDialog: false\n  }),\n        _useState12 = _slicedToArray(_useState11, 2),\n        dialog = _useState12[0],\n        setDialog = _useState12[1];\n\n  const _useState13 = useState({\n    open: false,\n    autoHideDuration: 0,\n    message: ''\n  }),\n        _useState14 = _slicedToArray(_useState13, 2),\n        snackbar = _useState14[0],\n        setSnackbar = _useState14[1];\n\n  useEffect(() => {\n    getBlock().then(function (data) {\n      example(data);\n    });\n    const removeAuthStateChangedObserver = auth.onAuthStateChanged(user => {\n      //* if there is no user...\n      if (!user) {\n        setUser(null);\n        setUserData(null);\n        setSignedIn(false);\n        setReady(true);\n        return;\n      }\n\n      const uid = user.uid; //* if there is no uid...\n\n      if (!uid) {\n        setUser(null);\n        setUserData(null);\n        setSignedIn(false);\n        setReady(true);\n        return;\n      }\n\n      const reference = firestore.collection('users').doc(uid); //* if there is no reference...\n\n      if (!reference) {\n        setUser(null);\n        setUserData(null);\n        setSignedIn(false);\n        setReady(true);\n        return;\n      }\n\n      const removeReferenceListener = reference.onSnapshot(snapshot => {\n        if (!snapshot.exists) {\n          if (removeReferenceListener) {\n            removeReferenceListener();\n          }\n\n          setUser(null);\n          setUserData(null);\n          setSignedIn(false);\n          setReady(true);\n          return;\n        }\n\n        const data = snapshot.data();\n\n        if (!data) {\n          if (removeReferenceListener) {\n            removeReferenceListener();\n          }\n\n          setUser(null);\n          setUserData(null);\n          setSignedIn(false);\n          setReady(true);\n          return;\n        }\n\n        setUser(user);\n        setUserData(data);\n        setSignedIn(true);\n        setReady(true);\n      });\n    });\n    return () => {\n      if (removeAuthStateChangedObserver) {\n        removeAuthStateChangedObserver();\n      }\n    };\n  }, []);\n\n  const openSnackbar = (message, autoHideDuration = 2) => {\n    setSnackbar({\n      open: true,\n      message,\n      autoHideDuration: readingTime(message).time * autoHideDuration\n    });\n  };\n\n  return React.createElement(PatientContextProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, React.createElement(AlertContextProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(ThemeProvider, {\n    theme: theme,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \" \", !ready && React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }), \" \", ready && React.createElement(React.Fragment, null, React.createElement(Navbar, {\n    signedIn: signedIn,\n    performingAction: performingAction,\n    user: user,\n    userData: userData,\n    onSignUpClick: () => setDialog(_objectSpread({}, dialog, {\n      signUpDialog: true\n    })),\n    onSignInClick: () => setDialog(_objectSpread({}, dialog, {\n      signInDialog: true\n    })),\n    onSettingsClick: () => setDialog(_objectSpread({}, dialog, {\n      settingsDialog: true\n    })),\n    onSignOutClick: () => setDialog(_objectSpread({}, dialog, {\n      signOutDialog: true\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }), React.createElement(Routes, {\n    signedIn: signedIn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }), React.createElement(DialogHost, {\n    signedIn: signedIn,\n    dialogs: {\n      signUpDialog: {\n        dialogProps: {\n          open: dialog.signUpDialog,\n          onClose: () => setDialog(_objectSpread({}, dialog, {\n            signUpDialog: false\n          }))\n        },\n        props: {\n          performingAction,\n          openSnackbar: message => openSnackbar(message)\n        }\n      },\n      signInDialog: {\n        dialogProps: {\n          open: dialog.signInDialog,\n          onClose: () => setDialog(_objectSpread({}, dialog, {\n            signInDialog: false\n          }))\n        },\n        props: {\n          performingAction,\n          openSnackbar: message => openSnackbar(message)\n        }\n      },\n      settingsDialog: {\n        dialogProps: {\n          open: dialog.settingsDialog,\n          onClose: () => setDialog(_objectSpread({}, dialog, {\n            settingsDialog: false\n          }))\n        },\n        props: {\n          user,\n          userData: userData,\n          // eslint-disable-line\n          theme,\n          openSnackbar: message => openSnackbar(message),\n          onDeleteAccountClick: () => setDialog(_objectSpread({}, dialog, {\n            deleteAccountDialog: false\n          }))\n        }\n      },\n      deleteAccountDialog: {\n        dialogProps: {\n          open: dialog.deleteAccountDialog,\n          onClose: () => setDialog(_objectSpread({}, dialog, {\n            deleteAccountDialog: false\n          }))\n        },\n        props: {\n          performingAction,\n          userData: userData,\n          // eslint-disable-line\n          openSnackbar: message => openSnackbar(message)\n        }\n      },\n      signOutDialog: {\n        dialogProps: {\n          open: dialog.signOutDialog,\n          onClose: () => setDialog(_objectSpread({}, dialog, {\n            signOutDialog: false\n          }))\n        },\n        props: {\n          performingAction\n        }\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }), React.createElement(Snackbar, {\n    open: snackbar.open,\n    autoHideDuration: snackbar.autoHideDuration,\n    message: snackbar.message,\n    onClose: () => setSnackbar({\n      open: false\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346\n    },\n    __self: this\n  }), \" \"), \" \"), \" \"), \" \");\n}\n\nexport default App;","map":{"version":3,"sources":["/home/n3m0/Documents/integrated/client/src/App.js"],"names":["React","useState","useEffect","readingTime","Snackbar","ThemeProvider","theme","auth","firestore","Navbar","Loading","DialogHost","Routes","PatientContextProvider","AlertContextProvider","getWeb3","MedChainContract","getBlock","data","storageValue","web3","accounts","contract","console","log","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","cont","error","alert","example","methods","add_paitent","send","from","response","lookup_paitent","call","App","user","setUser","userData","setUserData","signedIn","setSignedIn","ready","setReady","performingAction","setPerformingAction","signUpDialog","signInDialog","settingsDialog","signOutDialog","deleteAccountDialog","dialog","setDialog","open","autoHideDuration","message","snackbar","setSnackbar","then","removeAuthStateChangedObserver","onAuthStateChanged","uid","reference","collection","doc","removeReferenceListener","onSnapshot","snapshot","exists","openSnackbar","time","dialogProps","onClose","props","onDeleteAccountClick"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useEffect\n} from 'react';\n\nimport readingTime from 'reading-time';\n\n//* MUI\nimport Snackbar from '@material-ui/core/Snackbar';\nimport {\n  ThemeProvider\n} from '@material-ui/core/styles';\nimport theme from './utils/theme';\nimport {\n  auth,\n  firestore\n} from './firebase';\n\n//* Components\nimport Navbar from './components/Navbar';\nimport Loading from './components/Loading';\nimport DialogHost from './components/Dialog/DialogHost';\n\n//* Pages\nimport Routes from './pages/Routes';\n\n//* Context\nimport PatientContextProvider from './context/patient/PatientContext';\nimport AlertContextProvider from './context/alert/AlertContext';\n\n// Blockchain\nimport getWeb3 from \"./utils/getWeb3.js\";\n\nimport MedChainContract from \"./contracts/med_chain.json\";\n\n\nasync function getBlock() {\n  try {\n\n    var data = {\n      storageValue: 0,\n      web3: null,\n      accounts: null,\n      contract: null\n    }\n    console.log(\"its going\");\n    const web3 = await getWeb3();\n    const accounts = await web3.eth.getAccounts();\n    const networkId = await web3.eth.net.getId();\n    const deployedNetwork = MedChainContract.networks[networkId];\n    const instance = new web3.eth.Contract(\n      MedChainContract.abi,\n      deployedNetwork && deployedNetwork.address,\n    );\n\n    const cont = instance;\n    data.accounts = accounts;\n    data.web3 = web3;\n    data.contract = instance;\n    return data;\n  } catch (error) {\n    alert(\n      `Failed to load web3, accounts, or contract. Check console for details.`,\n    );\n    console.error(error);\n  }\n};\n\nasync function example(data) {\n  console.log(data.accounts);\n  console.log(data.accounts[0]);\n  data.contract.address = data.accounts[0];\n  await data.contract.methods.add_paitent(19, 20, \"Krishna\", \"7/11/1998\", 40, \"Male\", \"None\").send({\n    from: data.accounts[0]\n  });\n  const response = await data.contract.methods.lookup_paitent(19).call();\n  console.log(response);\n}\n\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [signedIn, setSignedIn] = useState(false);\n  const [ready, setReady] = useState(false);\n  const [performingAction, setPerformingAction] = useState(false);\n  const [dialog, setDialog] = useState({\n    signUpDialog: false,\n    signInDialog: false,\n    settingsDialog: false,\n    signOutDialog: false,\n    deleteAccountDialog: false,\n  });\n\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    autoHideDuration: 0,\n    message: '',\n  });\n\n  useEffect(() => {\n\n    getBlock().then(function (data) {\n      example(data);\n    });\n\n    const removeAuthStateChangedObserver = auth.onAuthStateChanged(user => {\n      //* if there is no user...\n      if (!user) {\n        setUser(null);\n        setUserData(null);\n        setSignedIn(false);\n        setReady(true);\n        return;\n      }\n\n      const {\n        uid\n      } = user;\n\n      //* if there is no uid...\n      if (!uid) {\n        setUser(null);\n        setUserData(null);\n        setSignedIn(false);\n        setReady(true);\n        return;\n      }\n\n      const reference = firestore.collection('users').doc(uid);\n\n      //* if there is no reference...\n      if (!reference) {\n        setUser(null);\n        setUserData(null);\n        setSignedIn(false);\n        setReady(true);\n        return;\n      }\n\n      const removeReferenceListener = reference.onSnapshot(snapshot => {\n        if (!snapshot.exists) {\n          if (removeReferenceListener) {\n            removeReferenceListener();\n          }\n          setUser(null);\n          setUserData(null);\n          setSignedIn(false);\n          setReady(true);\n          return;\n        }\n\n        const data = snapshot.data();\n\n        if (!data) {\n          if (removeReferenceListener) {\n            removeReferenceListener();\n          }\n\n          setUser(null);\n          setUserData(null);\n          setSignedIn(false);\n          setReady(true);\n          return;\n        }\n\n        setUser(user);\n        setUserData(data);\n        setSignedIn(true);\n        setReady(true);\n      });\n    });\n\n    return () => {\n      if (removeAuthStateChangedObserver) {\n        removeAuthStateChangedObserver();\n      }\n    };\n  }, []);\n\n  const openSnackbar = (message, autoHideDuration = 2) => {\n    setSnackbar({\n      open: true,\n      message,\n      autoHideDuration: readingTime(message).time * autoHideDuration,\n    });\n  };\n\n  return ( <\n    PatientContextProvider >\n    <\n    AlertContextProvider >\n    <\n    ThemeProvider theme = {\n      theme\n    } > {\n      !ready && < Loading / >\n    } {\n      ready && ( <\n        >\n        <\n        Navbar signedIn = {\n          signedIn\n        }\n        performingAction = {\n          performingAction\n        }\n        user = {\n          user\n        }\n        userData = {\n          userData\n        }\n        onSignUpClick = {\n          () =>\n          setDialog({\n            ...dialog,\n            signUpDialog: true\n          })\n        }\n        onSignInClick = {\n          () =>\n          setDialog({\n            ...dialog,\n            signInDialog: true\n          })\n        }\n        onSettingsClick = {\n          () =>\n          setDialog({\n            ...dialog,\n            settingsDialog: true\n          })\n        }\n        onSignOutClick = {\n          () =>\n          setDialog({\n            ...dialog,\n            signOutDialog: true\n          })\n        }\n        />\n\n        <\n        Routes signedIn = {\n          signedIn\n        }\n        />\n\n        <\n        DialogHost signedIn = {\n          signedIn\n        }\n        dialogs = {\n          {\n            signUpDialog: {\n              dialogProps: {\n                open: dialog.signUpDialog,\n                onClose: () =>\n                  setDialog({\n                    ...dialog,\n                    signUpDialog: false\n                  }),\n              },\n\n              props: {\n                performingAction,\n                openSnackbar: message => openSnackbar(message),\n              },\n            },\n\n            signInDialog: {\n              dialogProps: {\n                open: dialog.signInDialog,\n                onClose: () =>\n                  setDialog({\n                    ...dialog,\n                    signInDialog: false\n                  }),\n              },\n\n              props: {\n                performingAction,\n                openSnackbar: message => openSnackbar(message),\n              },\n            },\n\n            settingsDialog: {\n              dialogProps: {\n                open: dialog.settingsDialog,\n                onClose: () =>\n                  setDialog({\n                    ...dialog,\n                    settingsDialog: false\n                  }),\n              },\n\n              props: {\n                user,\n                userData: userData, // eslint-disable-line\n                theme,\n                openSnackbar: message => openSnackbar(message),\n                onDeleteAccountClick: () =>\n                  setDialog({\n                    ...dialog,\n                    deleteAccountDialog: false\n                  }),\n              },\n            },\n\n            deleteAccountDialog: {\n              dialogProps: {\n                open: dialog.deleteAccountDialog,\n                onClose: () =>\n                  setDialog({\n                    ...dialog,\n                    deleteAccountDialog: false\n                  }),\n              },\n\n              props: {\n                performingAction,\n                userData: userData, // eslint-disable-line\n                openSnackbar: message => openSnackbar(message),\n              },\n            },\n\n            signOutDialog: {\n              dialogProps: {\n                open: dialog.signOutDialog,\n                onClose: () =>\n                  setDialog({\n                    ...dialog,\n                    signOutDialog: false\n                  }),\n              },\n\n              props: {\n                performingAction,\n              },\n            },\n          }\n        }\n        />\n\n        <\n        Snackbar open = {\n          snackbar.open\n        }\n        autoHideDuration = {\n          snackbar.autoHideDuration\n        }\n        message = {\n          snackbar.message\n        }\n        onClose = {\n          () => setSnackbar({\n            open: false\n          })\n        }\n        /> <\n        />\n      )\n    } <\n    /ThemeProvider> <\n    /AlertContextProvider> <\n    /PatientContextProvider>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}